<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background: #f0f2f5;
            padding: 20px;
            direction: rtl;
        }

        h2 {
            text-align: center;
            color: #1565c0;
            margin-bottom: 20px;
        }

        .actions, .sort-bar {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn-download, .btn-exit, .sort-btn {
            padding: 10px 22px;
            font-size: 16px;
            font-weight: 700;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            text-decoration: none;
        }

        .btn-download { background: #1b1b1b; }
        .btn-download:hover { opacity: 0.85; transform: scale(1.03); }

        .btn-exit { background: #b71c1c; }
        .btn-exit:hover { background: #7f0000; }

        .print-btn {
            padding: 10px 22px;
            background: #1e88e5;
            color: white;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 700;
            transition: all 0.3s ease;
        }
        .print-btn:hover { background: #1565c0; transform: scale(1.03); }

        .sort-btn {
            background: #6a1b9a;
        }
        .sort-btn:hover {
            background: #4a148c;
            transform: scale(1.05);
        }

        .active-sort {
            background: #2e7d32 !important;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
        }

        th, td {
            border: 1px solid #999;
            padding: 8px 10px;
            text-align: center;
            font-size: 14px;
        }

        th { background: #1565c0; color: white; }

        tr:nth-child(even) { background: #e3f2fd; }
        tr:hover { background: #bbdefb; }
    </style>
</head>

<body>

<h2>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</h2>

<!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªØ±ØªÙŠØ¨ -->
<div class="sort-bar">
    <a href="/view_employees?sort=ccp"
       class="sort-btn {% if current_sort == 'ccp' %}active-sort{% endif %}">
       ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ CCP
    </a>

    <a href="/view_employees?sort=last_name"
       class="sort-btn {% if current_sort == 'last_name' %}active-sort{% endif %}">
       ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù„Ù‚Ø¨
    </a>

    <a href="/view_employees?sort=ecole"
       class="sort-btn {% if current_sort == 'ecole' %}active-sort{% endif %}">
       ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¤Ø³Ø³Ø©
    </a>

    <a href="/view_employees" class="sort-btn">
       Ø¨Ø¯ÙˆÙ† ØªØ±ØªÙŠØ¨
    </a>
</div>


<div class="actions">
    <button type="button" class="btn-download"
        onclick="window.location.href='/download_employees'">
        ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø¨ØµÙŠØºØ© Excel
    </button>

    <a href="#" onclick="window.print();" class="print-btn">
        ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¬Ø¯ÙˆÙ„
    </a>

    <button type="button" class="btn-exit"
        onclick="window.location.href='/edit'">
        Ø®Ø±ÙˆØ¬
    </button>
</div>


<table>
    <thead>
        <tr>
            <th>CCP</th>
            <th>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</th>
            <th>NIN</th>
            <th>Ø§Ù„Ù„Ù‚Ø¨</th>
            <th>Ø§Ù„Ø§Ø³Ù…</th>
            <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</th>
            <th>Ø§Ù„Ø±ØªØ¨Ø©</th>
            <th>Ø§Ù„Ø·ÙˆØ±</th>
            <th>Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©</th>
            <th>Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©</th>
            <th>Ù…Ø¤Ø³Ø³Ø© Ø§Ù„Ø¹Ù…Ù„</th>
        </tr>
    </thead>
    <tbody>
        {% for employee in employees %}
        <tr>
            <td>{{ employee.CCP }}</td>
            <td>{{ employee.TEL or '' }}</td>
            <td>{{ employee.NIN or '' }}</td>
            <td>{{ employee.last_name }}</td>
            <td>{{ employee.first_name }}</td>
            <td>{{ employee.birth_date }}</td>
            <td>{{ employee.poste_travail or '' }}</td>
            <td>{{ employee.categorie or '' }}</td>
            <td>{{ employee.daira or '' }}</td>
            <td>{{ employee.commune or '' }}</td>
            <td>{{ employee.ecole or '' }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

</body>
</html>
