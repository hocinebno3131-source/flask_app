<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background: #f0f2f5;
            padding: 20px;
            direction: rtl;
        }

        h2 {
            text-align: center;
            color: #1565c0;
            margin-bottom: 20px;
        }

        .actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .btn-download, .btn-exit {
            padding: 10px 22px;
            font-size: 16px;
            font-weight: 700;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
        }

        .btn-download { background: #1b1b1b; }
        .btn-download:hover { opacity: 0.85; transform: scale(1.03); }

        .btn-exit { background: #b71c1c; }
        .btn-exit:hover { background: #7f0000; }

        .print-btn {
            padding: 10px 22px;
            text-align: center;
            background: #1e88e5;
            color: white;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 700;
            transition: all 0.3s ease;
        }
        .print-btn:hover { background: #1565c0; transform: scale(1.03); }

        .search-bar {
            text-align: center;
            margin-bottom: 15px;
        }
        .search-bar input {
            padding:10px;
            width:300px;
            font-size:16px;
            border-radius:6px;
            border:1px solid #aaa;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
        }

        th, td {
            border: 1px solid #999;
            padding: 8px 10px;
            text-align: center;
            font-size: 14px;
        }

        th { background: #1565c0; color: white; }

        tr:nth-child(even) { background: #e3f2fd; }
        tr:hover { background: #bbdefb; }
    </style>
</head>

<body>

    <h2>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</h2>

    <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ­ÙƒÙ… -->
    <div class="actions">
        <!-- Ø²Ø± ØªÙ†Ø²ÙŠÙ„ Excel -->
        <button type="button" class="btn-download" onclick="window.location.href='/download_employees'">
            ØªÙ†Ø²ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø¨ØµÙŠØºØ© Excel
        </button>

        <!-- Ø²Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© -->
        <a href="#" onclick="window.print();" class="print-btn">
            ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¬Ø¯ÙˆÙ„
        </a>

        <!-- Ø²Ø± Ø§Ù„Ø®Ø±ÙˆØ¬ -->
        <button type="button" class="btn-exit" onclick="window.location.href='/edit'">
            Ø®Ø±ÙˆØ¬
        </button>
    </div>

    <!-- Ø­Ù‚Ù„ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ÙÙˆØ±ÙŠ -->
    <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¬Ø¯ÙˆÙ„...">
    </div>

    <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† -->
    <table>
        <thead>
            <tr>
                <th>CCP</th>
                <th>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</th>
                <th>NIN</th>
                <th>Ø§Ù„Ù„Ù‚Ø¨</th>
                <th>Ø§Ù„Ø§Ø³Ù…</th>
                <th>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</th>
                <th>Ø§Ù„Ø±ØªØ¨Ø©</th>
                <th>Ø§Ù„Ø·ÙˆØ±</th>
                <th>Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©</th>
                <th>Ø§Ù„Ø¨Ù„Ø¯ÙŠØ©</th>
                <th>Ù…Ø¤Ø³Ø³Ø© Ø§Ù„Ø¹Ù…Ù„</th>
            </tr>
        </thead>
        <tbody>
            {% for employee in employees %}
            <tr>
                <td>{{ employee.CCP }}</td>
                <td>{{ employee.TEL or '' }}</td>
                <td>{{ employee.NIN or '' }}</td>
                <td>{{ employee.last_name }}</td>
                <td>{{ employee.first_name }}</td>
                <td>{{ employee.birth_date }}</td>
                <td>{{ employee.poste_travail or '' }}</td>
                <td>{{ employee.categorie or '' }}</td>
                <td>{{ employee.daira or '' }}</td>
                <td>{{ employee.commune or '' }}</td>
                <td>{{ employee.ecole or '' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Ø³ÙƒØ±Ø¨Øª Ø§Ù„Ø¨Ø­Ø« Ø§Ù„ÙÙˆØ±ÙŠ -->
    <script>
        document.getElementById('searchInput').addEventListener('keyup', function() {
            const filter = this.value.toLowerCase();
            const rows = document.querySelectorAll('table tbody tr');
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(filter) ? '' : 'none';
            });
        });
    </script>

</body>
</html>
